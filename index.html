import React, { useState, useEffect } from "react"; import { motion, AnimatePresence } from "framer-motion";

// PremiumWorkerHireUI.jsx // Single-file React component demo (Tailwind utility classes assumed available) // - Customer dashboard // - Worker dashboard // - Smooth loading + transitions // - Photo support (base64 preview) // - Sample data + hooks for backend integration

export default function PremiumWorkerHireUI() { const [view, setView] = useState("customer"); // 'customer' or 'worker' const [loading, setLoading] = useState(false); const [workers, setWorkers] = useState([]); const [selectedWorker, setSelectedWorker] = useState(null); const [hours, setHours] = useState(1); const [toast, setToast] = useState(null);

useEffect(() => { // simulate fetching workers setLoading(true); const t = setTimeout(() => { setWorkers(sampleWorkers); setLoading(false); }, 700); return () => clearTimeout(t); }, []);

function showToast(msg) { setToast(msg); setTimeout(() => setToast(null), 2500); }

async function bookWorker(w) { setSelectedWorker(w); setLoading(true); try { // TODO: call your backend endpoint to create an order // const res = await fetch(${BACKEND_URL}/create-order, { method: 'POST', body: JSON.stringify({ amount: w.rate * hours * 100 }) }) // const json = await res.json();

await new Promise((r) => setTimeout(r, 900)); // demo
  showToast(`Booked ${w.name} for ${hours} hour(s)`);
} catch (e) {
  showToast("Booking failed");
} finally {
  setLoading(false);
}

}

return ( <div className="min-h-screen bg-gradient-to-b from-gray-50 to-white p-6 font-sans"> <div className="max-w-5xl mx-auto"> <header className="flex items-center justify-between mb-6"> <h1 className="text-2xl font-semibold">WorkerHire — Premium</h1> <div className="flex gap-2"> <button onClick={() => setView("customer")} className={px-4 py-2 rounded-lg ${view === "customer" ? "bg-indigo-600 text-white" : "bg-white border"}} > Customer </button> <button onClick={() => setView("worker")} className={px-4 py-2 rounded-lg ${view === "worker" ? "bg-indigo-600 text-white" : "bg-white border"}} > Worker </button> </div> </header>

<AnimatePresence exitBeforeEnter>
      {loading ? (
        <motion.div
          key="loader"
          initial={{ opacity: 0 }}
          animate={{ opacity: 1 }}
          exit={{ opacity: 0 }}
          className="flex items-center justify-center py-20"
        >
          <div className="space-y-2 text-center">
            <div className="w-20 h-20 rounded-full bg-gradient-to-r from-indigo-400 to-pink-400 animate-pulse" />
            <div className="text-sm text-gray-600">Loading…</div>
          </div>
        </motion.div>
      ) : view === "customer" ? (
        <motion.div key="customer" initial={{ x: 30, opacity: 0 }} animate={{ x: 0, opacity: 1 }} exit={{ x: -30, opacity: 0 }}>
          <CustomerView workers={workers} onBook={bookWorker} setHours={setHours} hours={hours} />
        </motion.div>
      ) : (
        <motion.div key="worker" initial={{ x: 30, opacity: 0 }} animate={{ x: 0, opacity: 1 }} exit={{ x: -30, opacity: 0 }}>
          <WorkerView workers={workers} setWorkers={setWorkers} showToast={showToast} />
        </motion.div>
      )}
    </AnimatePresence>

    <AnimatePresence>
      {toast && (
        <motion.div initial={{ y: 20, opacity: 0 }} animate={{ y: 0, opacity: 1 }} exit={{ y: 20, opacity: 0 }} className="fixed bottom-6 right-6 bg-white shadow-lg px-4 py-2 rounded-lg">
          {toast}
        </motion.div>
      )}
    </AnimatePresence>
  </div>
</div>

); }

function CustomerView({ workers, onBook, hours, setHours }) { return ( <div className="grid grid-cols-1 md:grid-cols-3 gap-6"> <div className="md:col-span-2"> <h2 className="text-xl font-medium mb-4">Workers</h2> <div className="space-y-4"> {workers.map((w) => ( <WorkerCard key={w.id} w={w} onBook={onBook} hours={hours} /> ))} </div> </div>

<aside className="bg-white p-4 rounded-lg shadow">
    <h3 className="font-semibold">Quick Booking</h3>
    <div className="mt-3">
      <label className="block text-sm text-gray-600">Hours</label>
      <input type="number" value={hours} min={1} onChange={(e) => setHours(Number(e.target.value))} className="mt-1 w-full border px-3 py-2 rounded" />
      <div className="mt-4 text-sm text-gray-600">Select a worker from left and click Book.</div>
    </div>
  </aside>
</div>

); }

function WorkerCard({ w, onBook, hours }) { return ( <div className="bg-white p-4 rounded-xl shadow flex gap-4 items-center"> <img src={w.photo || PLACEHOLDER} alt="photo" className="w-20 h-20 rounded-lg object-cover" /> <div className="flex-1"> <div className="flex justify-between items-start"> <div> <div className="font-semibold">{w.name}</div> <div className="text-sm text-gray-500">{w.cat}</div> </div> <div className="text-indigo-600 font-medium">₹{w.rate} / hr</div> </div> <p className="text-sm text-gray-600 mt-2 truncate">{w.desc}</p> <div className="mt-3 flex gap-2"> <button onClick={() => onBook(w)} className="px-4 py-2 rounded bg-indigo-600 text-white">Book</button> <button className="px-3 py-2 rounded border">Details</button> </div> </div> </div> ); }

function WorkerView({ workers, setWorkers, showToast }) { async function addWorker(form) { // form: { name, cat, rate, desc, photo } const added = { id: Date.now(), ...form }; setWorkers((s) => [added, ...s]); showToast("Worker added"); }

return ( <div className="bg-white p-6 rounded-lg shadow"> <h2 className="text-xl font-medium mb-4">Worker Dashboard</h2> <WorkerForm onAdd={addWorker} /> <div className="mt-6"> <h3 className="font-semibold mb-3">Your Workers</h3> <div className="space-y-3"> {workers.map((w) => ( <div key={w.id} className="flex items-center gap-3 border p-3 rounded"> <img src={w.photo || PLACEHOLDER} className="w-12 h-12 rounded" /> <div className="flex-1"> <div className="font-medium">{w.name}</div> <div className="text-sm text-gray-500">{w.cat} • ₹{w.rate}/hr</div> </div> </div> ))} </div> </div> </div> ); }

function WorkerForm({ onAdd }) { const [name, setName] = useState(""); const [cat, setCat] = useState("Housemaid"); const [rate, setRate] = useState(200); const [desc, setDesc] = useState(""); const [photo, setPhoto] = useState(null);

function readFileAsDataURL(file) { return new Promise((resolve, reject) => { const fr = new FileReader(); fr.onload = () => resolve(fr.result); fr.onerror = reject; fr.readAsDataURL(file); }); }

async function submit(e) { e.preventDefault(); let photoData = photo; if (photo && photo instanceof File) { photoData = await readFileAsDataURL(photo); } onAdd({ name, cat, rate, desc, photo: photoData }); setName(""); setDesc(""); setRate(200); setPhoto(null); }

return ( <form onSubmit={submit} className="space-y-3"> <div className="grid grid-cols-1 md:grid-cols-3 gap-3"> <input value={name} onChange={(e) => setName(e.target.value)} placeholder="Name" className="border px-3 py-2 rounded col-span-2" /> <select value={cat} onChange={(e) => setCat(e.target.value)} className="border px-3 py-2 rounded"> <option>Housemaid</option> <option>Carpenter</option> <option>Plumber</option> <option>Electrician</option> </select> </div> <div className="grid grid-cols-1 md:grid-cols-3 gap-3"> <input type="number" value={rate} onChange={(e) => setRate(Number(e.target.value))} className="border px-3 py-2 rounded" placeholder="Rate per hour" /> <input type="file" accept="image/*" onChange={(e) => setPhoto(e.target.files[0])} className="border p-2 rounded" /> </div> <textarea value={desc} onChange={(e) => setDesc(e.target.value)} placeholder="Short description" className="w-full border px-3 py-2 rounded" /> <div> <button className="px-4 py-2 rounded bg-green-600 text-white">Add Worker</button> </div> </form> ); }

// Helpers & placeholder const PLACEHOLDER = "data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='200' height='200'><rect width='100%' height='100%' fill='%23f3f6fb'/><text x='50%' y='54%' font-size='20' fill='%232f6af6' text-anchor='middle'>No Photo</text></svg>";

const sampleWorkers = [ { id: 1, name: "Jagdish", cat: "Painter", rate: 369, desc: "Experienced painter", photo: null }, { id: 2, name: "Suresh", cat: "Plumber", rate: 299, desc: "Reliable plumber", photo: null }, { id: 3, name: "Radha", cat: "Housemaid", rate: 250, desc: "Trustworthy home help", photo: null }, ];
